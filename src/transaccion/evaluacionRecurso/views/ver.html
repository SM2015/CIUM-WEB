<md-sidenav layout="column" class="md-sidenav-left md-whiteframe-z2" md-component-id="left" md-is-locked-open="$mdMedia('gt-md')"   ng-include="'src/app/views/menu.html'"></md-sidenav>
<div layout="column" class="relative" layout-fill role="main" flex>
	
	<md-progress-linear  ng-if="cargando" class="md-warn" style="position:fixed; top:-5px; left:0px; z-index:999"  md-mode="indeterminate"></md-progress-linear>
	<md-toolbar >
		<div class="md-toolbar-tools" ng-init="ver('EvaluacionRecurso')">    
			<md-button hide-gt-md class="md-icon-button " ng-click="toggleMenu()" aria-label="Menu">
		  <md-icon md-svg-icon="menu" ></md-icon>
		    </md-button>   
			<h2>
			  <span>{{ 'VER' | translate }}</span>
			</h2>
			<span flex></span>	
            
            	
			<span ng-include="'src/app/views/menu-opciones.html'"></span>
		</div>
	</md-toolbar>
	<md-content>
<div class="imprimir">	
	<md-content  layout="column"  layour-align="center center"  >
		<md-list layout-margin class="md-whiteframe-z1" layout-align="center center" >
        		
            <md-content class="md-padding">
              <md-list-item layout-wrap ng-if="!update">
              	<div  align="center" style="width:100%">
                    <md-icon md-svg-icon="today"></md-icon>
                    <span> {{dato.fechaEvaluacion}} </span>
           			<br />
                    <span> <strong style="font-size:.8em;">{{ dato.cerrado  ? 'Cerrado' : 'Abierto' }}</strong> </span>
                  </div>
              	
              </md-list-item>
              
              
              	<md-list-item style="margin-top:-35px;"> 
                    <md-input-container flex >
                         <input type="hidden" aria-label="idCone" ng-model="dato.idCone" name="idCone" required>
                         <div ng-messages="forma.idCone.$error" >
                            <div ng-message="required">{{ 'CAMPO_REQUERIDO' | translate }}</div>                                    
                        </div>
                    </md-input-container>
                 </md-list-item>
            </md-content> 
                 <md-content layout="column"  layour-align="center center" >
					<md-list layout-margin  layout-align="center center" >
                    	<md-input-container flex >
                            <div style="text-align:center" flex>                            
                            	<h4 style="font-size:1.3em">{{ dato.nombre }}</h4>
                                <h5 style="font-size:1em"><md-icon md-svg-icon="star"></md-icon> {{ dato.clues }}</h5>
                                <p style="font-size:.5em; margin-bottom:20px;">
                                {{ dato.domicilio }}  <strong>CP: </strong> {{ dato.codigoPostal }}
                                </p>
                                <md-divider ></md-divider>
                                
                                <div  style="font-size:.7em; margin:20px;">
                                    <span flex="33.33">
                                      <strong>{{ 'JURISDICCION' | translate }}:</strong> {{ dato.jurisdiccion }}
                                    </span>
                                    <span flex="33.33">
                                      <strong>{{ 'MUNICIPIO' | translate }}:</strong> {{ dato.municipio }}
                                    </span>
                                    <span flex="33.33">
                                    <strong>{{ 'LOCALIDAD' | translate }}:</strong> {{ dato.localidad }}
                                    </span>
                                </div>                             
                                <md-divider ></md-divider>
                                
                                <div  style="font-size:.6em; margin:20px;">
                                    <span flex="50">
                                    	<md-icon md-svg-icon="business"></md-icon> {{ dato.tipologia }}
                                    </span>
                                    <span flex="50">
                                    	<md-icon md-svg-icon="style"></md-icon> {{ dato.tipoUnidad }}
                                    </span>
                                </div>
                                <md-divider ></md-divider>
                                
                                <div  style="font-size:.7em; margin-top:20px">
                                	<span class="col-xs-12">
                                		<md-icon md-svg-icon="airline-seat-flat"></md-icon><strong> Nivel CONE:</strong> {{ dato.nivelCone }}
                                    </span>
                                </div>
                            </div>
						</md-input-container>

                	</md-list>
				</md-content>
			  
		</md-list>
	</md-content>
    <div style="margin-top:40px"></div>
    <md-content  layout="column"  layour-align="center center"  ng-init="cargarCriteriosVer()">
		<md-list layout-margin class="md-whiteframe-z1" layout-align="center center" >
        	<md-toolbar class="md-theme-light">
              <h2 class="md-toolbar-tools">
                <span flex>{{ 'INDICADOR' | translate}}</span>                                 
              </h2> 
            </md-toolbar>
            <md-content>
            	
                <md-data-table-container>
  <table md-data-table md-progress="datos">
    <thead md-order="query.order" md-trigger="onOrderChange">
      <tr>
                        <th name="{{ 'INDICADOR' | translate}}"></th>
                        <th name="{{ 'CRITERIO' | translate}}"></th>
                        <th name="{{ 'APROBADO' | translate}}"></th>
                        <th name="{{ 'PORCENTAJE' | translate}}"></th>
                    </tr>
                </thead>
    <tbody>
                    
                    <tr ng-repeat="value in criterios.indicadores">
                                
                        <td>{{ value.codigo }} | {{ value.nombre }}</td>
                        <td>{{ value.indicadores.totalCriterios }}</td>
                        <td>{{ value.indicadores.totalAprobados }}</td>
                        <td>
                        	<div class="progress" >
                              <div class="progress-bar progress-bar-striped active progress-bar-default" role="progressbar"
                              aria-valuenow="{{ value.indicadores.totalPorciento }}" aria-valuemin="0" aria-valuemax="100" style="width:{{ value.indicadores.totalPorciento }}%; background:{{ value.indicadores.totalColor }}">
                                {{ value.indicadores.totalPorciento }}%
                              </div></div>			
                    	</td>
                     
                 	</tr>
    </tbody>
  </table>
</md-data-table-container>

            </md-content>
        </md-list>
	</md-content>
    
    
    
    
    <md-content  layout="column"  layour-align="center center"  >
		<md-list layout-margin class="md-whiteframe-z1" layout-align="center center" >
        	<md-toolbar md-theme="altTheme" class="md-accent">
              <h2 class="md-toolbar-tools">
                <span flex>{{ 'CRITERIO' | translate}}</span>                                 
              </h2> 
            </md-toolbar>
            <md-content  ng-repeat="(key, value) in criterios | groupBy : 'lugarVerificacion'"  ng="'animate'" ng-if="key != 'undefined'">
            
                <md-toolbar class="md-theme-light">
                  <h2 class="md-toolbar-tools">
                    <span flex>{{ value[0].codigo }} | {{ key }}</span>                                 
                  </h2> 
                </md-toolbar>
                <md-content>
                
                    <md-data-table-container>
                      <table md-data-table md-progress="datos">
                        <thead md-order="query.order" md-trigger="onOrderChange">
                          <tr>
                              <th width="90%" name="{{ 'CRITERIO' | translate}}"></th>
                              <th name="{{ 'APROBADO' | translate}}"></th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat="c in value">
                              <td width="90%">{{ c.criterio  }}</td>
                               <td>
                                <md-button class="md-raised"  style="width:100%; background-color: {{ c.aprobado == 1 ? '#7BE15E' : c.aprobado == 0 ? '#FF3C3C' : '#3198FF' }}; color:#FFF; font-weight:bold;">{{ c.aprobado == 1 ? 'Si' : c.aprobado == 0 ? 'No' : 'N/A' }} 
                                </md-button>
                                </td>
                              </tr>
                        </tbody>
                      </table>
                    </md-data-table-container>                         
                </md-content>
            </md-content>
        </md-list>
	</md-content>

    
  <md-content  layout="column"  layour-align="center center"   ng-if="hallazgos" >   <span ng-init="acciones();accionesPlazo()"></span>                            
    <md-list layout-margin class="md-whiteframe-z1" layout-align="center center" ng-repeat="(key, dato) in hallazgos">
   		
          	
          <md-toolbar class="md-accent md-warn" >
              <h2 class="md-toolbar-tools">
                <span flex>{{ 'HALLAZGO' | translate }} {{  'INDICADOR' | translate }} : {{key}}</span>                                 
              </h2>
          </md-toolbar>

        	<md-list-item>
                    	
            <md-input-container flex >     
                <label>{{ 'HALLAZGO' | translate }}</label>
                    <textarea ng-model="dato.descripcion" name="hallazgo" columns="1" maxlength="500" readonly>{{dato.descripcion}}</textarea>			
                    
            </md-input-container>

          </md-list-item>
          <md-list-item >

            <md-input-container flex >     
              <p>{{ 'ACCION' | translate }}</p>
                <md-select  ng-model="dato.idAccion"  id="accion" placeholder="{{ 'ACCION' | translate }}" disabled>
                        <md-optgroup label="{{currentGroup == 'R' ? 'Resolutiva' : 'Seguimiento' }}" ng-repeat="currentGroup in groupList" >
                          <md-option ng-value="item.id" ng-repeat="item in acciones | filter: {tipo: currentGroup}" ng-click="verSeguimiento(item.tipo)">{{item.nombre}}</md-option>
                        </md-optgroup>
                      </md-select>
              
            </md-input-container>

	   		    <md-input-container flex ng-if="dato.idPlazoAccion>0">
		          <p>{{ 'PLAZO-ACCION' | translate }}</p>
		          <md-select ng-model="dato.idPlazoAccion"  placeholder="{{ 'PLAZO-ACCION' | translate }}" disabled>
												<md-option ng-value="item.id" ng-repeat="item in plazos" >{{item.nombre}}</md-option>
											</md-select>     	
		        </md-input-container>

          </md-list-item>

			</md-list>
		</md-content>
    
    <md-content  layout="column"  layour-align="center center" >               
    <md-list layout-margin layout-align="center center" class="md-whiteframe-z1">
    <div align="center">
      {{ 'REPONSABLE' | translate }}
      <div style="margin-top:50px;"><img ng-if="dato.firma" style="width:10%" src="data:image/png;base64,{{dato.firma}}"></div>
      <hr style="margin-top:30px;width:300px;">
      <div style="padding:15px;">{{ dato.nombres }} {{ dato.apellidoPaterno }} {{ dato.apellidoMaterno }}</div>
    </div>
    </md-list>
    </md-content>
  </div>
</md-content>
</div>