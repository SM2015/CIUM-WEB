<md-sidenav layout="column" class="md-sidenav-left md-whiteframe-z2" md-component-id="left" md-is-locked-open="$mdMedia('gt-md')"   ng-include="'src/app/views/menu.html'"></md-sidenav>
<div layout="column" class="relative" layout-fill role="main" >
	<md-button class="md-fab md-fab-bottom-right" ng-click="nuevo()" aria-label="{{ 'NUEVA' | translate }}" >
		<md-icon md-svg-icon="add"></md-icon>
  	</md-button>
	<md-progress-linear  ng-if="cargando" class="md-accent" style="position:fixed; top:-5px; left:0px; z-index:999"  md-mode="indeterminate"></md-progress-linear>
	<md-toolbar  >
		<div class="md-toolbar-tools">    
			<md-button hide-gt-md class="md-icon-button " ng-click="toggleMenu()" aria-label="Menu">
		  <md-icon md-svg-icon="menu" ></md-icon>
		    </md-button>   
			<h2>
			  <span>{{ 'INDICADOR' | translate }} <md-icon md-svg-icon="chevron-right"></md-icon>  {{ 'EDITAR' | translate }}</span>
			</h2>
			<span flex></span>	
            
            <md-button hide-md hide-sm  aria-label="{{ 'GUARDAR' | translate }}" ng-click="modificar(id)" ng-disabled="forma.$invalid">
              <md-icon md-svg-icon="save"></md-icon>
    			{{ 'GUARDAR' | translate }}
            </md-button>
            
            <md-button hide-md hide-sm  aria-label="{{ 'ELIMINAR' | translate }}" ng-click="borrar()">
                <md-icon md-svg-icon="delete"></md-icon>
                {{ 'ELIMINAR' | translate }}
            </md-button>
            	
			<span ng-include="'src/app/views/menu-opciones.html'"></span>
		</div>
	</md-toolbar>
	<md-content>
	
<form role="form" name="forma" ng-init="ver('Indicador');Alertas();">
<md-content layout="column" class="imprimir"  layour-align="center center"  >
	<md-list layout-margin class="md-whiteframe-z1" layout-align="center center" >	

            <md-list-item layout-wrap >						
                <md-input-container flex >     
                	<label>{{ 'CODIGO' | translate }}</label>
                        <input required  name="codigo" ng-model="dato.codigo" md-minlength="3" md-maxlength="25">
                        <div ng-messages="forma.codigo.$error">
                          <div ng-message="required">{{ 'CAMPO_REQUERIDO' | translate }}</div>
                          <div ng-message="md-minlength">{{ 'CAMPO_MIN_L' | translate }} 3</div>
                          <div ng-message="md-maxlength">{{ 'CAMPO_MAX_L' | translate }} 255</div>
                        </div>
                </md-input-container>
            					
                <md-input-container flex >     
                	<label>{{ 'NOMBRE' | translate }}</label>
                        <input required  name="nombre" ng-model="dato.nombre" md-minlength="3" md-maxlength="255">
                        <div ng-messages="forma.nombre.$error">
                          <div ng-message="required">{{ 'CAMPO_REQUERIDO' | translate }}</div>
                          <div ng-message="md-minlength">{{ 'CAMPO_MIN_L' | translate }} 3</div>
                          <div ng-message="md-maxlength">{{ 'CAMPO_MAX_L' | translate }} 255</div>
                        </div>
                </md-input-container>
            </md-list-item>

			<md-list-item >						
                <md-input-container flex >     
                <p>{{ 'CATEGORIA' | translate }}: <span class="radioValue">{{ dato.categoria }}</span> </p>
                <md-radio-group ng-model="dato.categoria">
                  <md-radio-button value="ABASTO">{{ 'ABASTO' | translate }}</md-radio-button>
                  <md-radio-button value="CALIDAD"> {{ 'CALIDAD' | translate }} </md-radio-button>
                </md-radio-group>
                        
                </md-input-container>
          
                <md-input-container flex >     
                  <label style="margin-top:-45px">{{ 'COLOR' | translate }}</label>
                    <color-picker required ng-model="dato.color" color-picker-format="HEX" name="color" style="position:relative"></color-picker>
                    <div ng-messages="forma.color.$error" style="margin-top:30px">
                      <div ng-message="required">{{ 'CAMPO_REQUERIDO' | translate }}</div>
                    </div>
                </md-input-container>
       
            </md-list-item>
			<md-divider ></md-divider>
              
			  <md-data-table
  table-card="{visible: true, title: 'Alerta'}"
  selectable-rows="true"
  alternate-headers="'contextual'"
  sortable-columns="true"
  delete-row-callback="deleteRowCallback(rows)">

    <md-data-table-header-row>
			  			<md-data-table-column align-rule="left">Minimo</md-data-table-column>
			  			<md-data-table-column align-rule="left">Maximo</md-data-table-column>
			  			<md-data-table-column align-rule="left">Color</md-data-table-column>
			  			<md-data-table-column align-rule="left"></md-data-table-column>			  			
			  		</md-data-table-header-row>
	
    <md-data-table-row table-row-id="dato.id" ng-repeat="item in dato.indicador_alertas | orderBy:ordenSeleccionado">
			 		
			 			
			 			<md-data-table-cell html-content="htmlContent"><md-input-container flex ><input aria-label="min{{$index}}" string-to-number type="number" min="0" max="100" ng-model="item.minimo"></md-input-container></md-data-table-cell>
			 			<md-data-table-cell html-content="htmlContent"><md-input-container flex ><input aria-label="max{{$index}}" string-to-number type="number" min="0" max="100" ng-model="item.maximo"></md-input-container></md-data-table-cell>
			 			<md-data-table-cell html-content="htmlContent">
                            
                            <md-select placeholder="Color" ng-model="item.idAlerta" ng-change="getIndexOf(item.idAlerta,$index)"  ng-init="getIndexOf(item.idAlerta,$index)">
                            	<md-option ng-repeat="campo in alertas" value="{{campo.id}}">{{campo.nombre}}</md-option>
                            </md-select>
			 			</md-data-table-cell>
                        
			 			<md-data-table-cell html-content="htmlContent"><span class="img-circle" style="background: {{ colorColor[$index] }}; display:block; height:25px; width:25px;"></md-data-table-cell>
			 		</md-data-table-row>
</md-data-table>
			  
				  	<md-button class="md-raised md-primary" type="button" ng-click="agregarAlerta()"><md-icon md-svg-src="check"></md-icon> {{ 'AGREAGAR' | translate}}</md-button> 
				  
            
     </md-list>
</md-content>
</form>
